<!doctype html>
<html>
<head>
<meta charset="utf-8"/>
<title>Zenchain NFT Minter</title>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<style>
body {
  font-family: 'Arial', sans-serif;
  margin:0; padding:0;
  background: linear-gradient(135deg,#6b73ff,#000dff);
  color:#fff;
  display:flex;
  flex-direction:column;
  align-items:center;
  min-height:100vh;
}
.container{
  background: rgba(0,0,0,0.5);
  padding:30px;
  border-radius:20px;
  margin-top:40px;
  text-align:center;
  max-width:500px;
  width:90%;
}
h1{
  margin-bottom:20px;
}
button{
  background:#ffdd57;
  color:#000;
  border:none;
  padding:12px 20px;
  border-radius:10px;
  font-weight:bold;
  cursor:pointer;
  margin:10px 0;
  transition: transform 0.2s;
}
button:hover{
  transform: scale(1.05);
}
input{
  padding:10px;
  width:100%;
  border-radius:8px;
  border:none;
  margin:6px 0;
}
#status{
  margin-top:15px;
  white-space:pre-wrap;
}
#totalMinted{
  font-size:20px;
  margin-top:10px;
  font-weight:bold;
}
</style>
</head>
<body>
<div class="container">
<h1>Zenchain NFT Minter</h1>
<p id="acc">Not connected</p>
<button id="connect">Connect Wallet</button>
<div>
  <input id="tokenURI" placeholder="Token metadata URL (auto-filled)" />
</div>
<button id="mint">Mint NFT</button>
<div id="status"></div>
<div id="totalMinted">Total Minted: 0</div>
</div>

<script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.min.js"></script>
<script>
const CONTRACT_ADDRESS = "0xYOUR_DEPLOYED_CONTRACT_ADDRESS"; // replace this
const CONTRACT_ABI = [
  {"inputs":[{"internalType":"string","name":"uri","type":"string"}],"name":"mint","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"nonpayable","type":"function"},
  {"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"Transfer","type":"event"}
];

let provider, signer, contract;
let currentNFT = 1;

async function connect() {
  const status = document.getElementById('status');
  try {
    if (!window.ethereum) { status.innerText='MetaMask not detected!'; return; }
    provider = new ethers.providers.Web3Provider(window.ethereum);
    await provider.send("eth_requestAccounts", []);
    signer = provider.getSigner();
    const addr = await signer.getAddress();
    document.getElementById('acc').innerText = 'Connected: '+addr;
    contract = new ethers.Contract(CONTRACT_ADDRESS, CONTRACT_ABI, signer);
    document.getElementById('status').innerText='Connected! MetaMask on Zenchain testnet.';
    document.getElementById('tokenURI').value = `https://raw.githubusercontent.com/hare-sod/zenchain-nft-minter/main/metadata/${currentNFT}.json`;
  } catch(e){ status.innerText='Error: '+e.message; }
}

async function mint() {
  const status = document.getElementById('status');
  try{
    if(!contract){ status.innerText='Connect your wallet first!'; return; }
    const uri = document.getElementById('tokenURI').value.trim();
    status.innerText='Sending transaction... Confirm in MetaMask';
    const tx = await contract.mint(uri);
    await tx.wait();
    status.innerText='Mint confirmed! Tx: '+tx.hash;
    document.getElementById('totalMinted').innerText='Total Minted: '+currentNFT;
    currentNFT++;
    if(currentNFT>10) currentNFT=1; // cycle back
    document.getElementById('tokenURI').value = `https://raw.githubusercontent.com/hare-sod/zenchain-nft-minter/main/metadata/${currentNFT}.json`;
  } catch(e){ status.innerText='Error: '+e.message; console.error(e); }
}

document.getElementById('connect').addEventListener('click', connect);
document.getElementById('mint').addEventListener('click', mint);
</script>
</body>
</html>
